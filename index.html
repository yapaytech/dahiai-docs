
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Dahi.ai Documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
      <div class="logo-title">Dahi.ai Docs</div>
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#dahi-ai" class="toc-h1 toc-link" data-title="Dahi.ai">Dahi.ai</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#about" class="toc-h2 toc-link" data-title="About">About</a>
                  </li>
                  <li>
                    <a href="#registration" class="toc-h2 toc-link" data-title="Registration">Registration</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#bot" class="toc-h1 toc-link" data-title="Bot">Bot</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#bot-create" class="toc-h2 toc-link" data-title="Bot Create">Bot Create</a>
                  </li>
                  <li>
                    <a href="#bot-intents" class="toc-h2 toc-link" data-title="Bot Intents">Bot Intents</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#intent" class="toc-h1 toc-link" data-title="Intent">Intent</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#how-to-create-intent" class="toc-h2 toc-link" data-title="How to Create Intent?">How to Create Intent?</a>
                  </li>
                  <li>
                    <a href="#input" class="toc-h2 toc-link" data-title="Input">Input</a>
                  </li>
                  <li>
                    <a href="#variables" class="toc-h2 toc-link" data-title="Variables">Variables</a>
                  </li>
                  <li>
                    <a href="#variable-types" class="toc-h2 toc-link" data-title="Variable Types">Variable Types</a>
                  </li>
                  <li>
                    <a href="#variable-keys-options" class="toc-h2 toc-link" data-title="Variable Keys options">Variable Keys options</a>
                  </li>
                  <li>
                    <a href="#variable-tojson" class="toc-h2 toc-link" data-title="Variable tojson">Variable tojson</a>
                  </li>
                  <li>
                    <a href="#output" class="toc-h2 toc-link" data-title="Output">Output</a>
                  </li>
                  <li>
                    <a href="#operation" class="toc-h2 toc-link" data-title="Operation">Operation</a>
                  </li>
                  <li>
                    <a href="#call-operation" class="toc-h2 toc-link" data-title="Call Operation">Call Operation</a>
                  </li>
                  <li>
                    <a href="#cache-operation" class="toc-h2 toc-link" data-title="Cache Operation">Cache Operation</a>
                  </li>
                  <li>
                    <a href="#forwardtoagent-operation" class="toc-h2 toc-link" data-title="ForwardToAgent Operation">ForwardToAgent Operation</a>
                  </li>
                  <li>
                    <a href="#forward" class="toc-h2 toc-link" data-title="Forward">Forward</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#entity" class="toc-h1 toc-link" data-title="Entity">Entity</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#add-entity" class="toc-h2 toc-link" data-title="Add Entity">Add Entity</a>
                  </li>
                  <li>
                    <a href="#edit-entity" class="toc-h2 toc-link" data-title="Edit Entity">Edit Entity</a>
                  </li>
                  <li>
                    <a href="#types" class="toc-h2 toc-link" data-title="Types">Types</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#live" class="toc-h1 toc-link" data-title="Live">Live</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#live-settings" class="toc-h2 toc-link" data-title="Live Settings">Live Settings</a>
                  </li>
                  <li>
                    <a href="#facebook-integration" class="toc-h2 toc-link" data-title="Facebook Integration">Facebook Integration</a>
                  </li>
                  <li>
                    <a href="#live-chat-test-page" class="toc-h2 toc-link" data-title=" Live-chat Test Page"> Live-chat Test Page</a>
                  </li>
                  <li>
                    <a href="#persistent-menu" class="toc-h2 toc-link" data-title="Persistent Menu">Persistent Menu</a>
                  </li>
                  <li>
                    <a href="#live-agent-panel" class="toc-h2 toc-link" data-title="Live Agent Panel">Live Agent Panel</a>
                  </li>
                  <li>
                    <a href="#live-analytics" class="toc-h2 toc-link" data-title="Live Analytics">Live Analytics</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api" class="toc-h1 toc-link" data-title="Api">Api</a>
          </li>
          <li>
            <a href="#template" class="toc-h1 toc-link" data-title="Template">Template</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-is-template" class="toc-h2 toc-link" data-title="What is Template">What is Template</a>
                  </li>
                  <li>
                    <a href="#main-paramaters" class="toc-h2 toc-link" data-title="Main Paramaters">Main Paramaters</a>
                  </li>
                  <li>
                    <a href="#schemas" class="toc-h2 toc-link" data-title="Schemas">Schemas</a>
                  </li>
                  <li>
                    <a href="#paramater-system" class="toc-h2 toc-link" data-title="Paramater System">Paramater System</a>
                  </li>
                  <li>
                    <a href="#helpers" class="toc-h2 toc-link" data-title="Helpers">Helpers</a>
                  </li>
                  <li>
                    <a href="#__if-helper" class="toc-h2 toc-link" data-title="__if helper">__if helper</a>
                  </li>
                  <li>
                    <a href="#__each-helper" class="toc-h2 toc-link" data-title="__each helper">__each helper</a>
                  </li>
                  <li>
                    <a href="#__type-helper" class="toc-h2 toc-link" data-title="__type helper">__type helper</a>
                  </li>
                  <li>
                    <a href="#__request-helper" class="toc-h2 toc-link" data-title="__request helper">__request helper</a>
                  </li>
                  <li>
                    <a href="#__run-helper" class="toc-h2 toc-link" data-title="__run helper">__run helper</a>
                  </li>
                  <li>
                    <a href="#__num-helper" class="toc-h2 toc-link" data-title="__num helper">__num helper</a>
                  </li>
                  <li>
                    <a href="#__json-helper" class="toc-h2 toc-link" data-title="__json helper">__json helper</a>
                  </li>
                  <li>
                    <a href="#__html-helper" class="toc-h2 toc-link" data-title="__html helper">__html helper</a>
                  </li>
                  <li>
                    <a href="#usage" class="toc-h2 toc-link" data-title="Usage">Usage</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><u>Usefull Links</u></li>
            <li><a href='http://dahi.ai'>Register to Dahi.ai</a></li>
            <li><a href='http://dahi.ai/live'>Live-Chat</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='dahi-ai'>Dahi.ai</h1><h2 id='about'>About</h2>
<blockquote>
<p><img src="images/home.png" alt="Home" /></p>
</blockquote>

<p>Dahi.ai is a chat-bot creation platform. Our system&#39;s most basic feature is it&#39;s how easy to create a basic chat-bot in couple of minutes. And grow with step by step.</p>

<p>Dahi.ai has couple of systems within. One is chat-bot the other one is live-chat and more...</p>

<p>Chat-bot system is responsible of what to response to questions.
Live-chat system is responsible of delivering messages between chat-bot, customer and customer service agent.</p>

<p>There couple of more system that helps or adds more features to the stack.
For example template feature. This is one of the new features that is open to the users. With template system you can connect your api&#39;s to dahi.ai without needing to code a new message formating system and host it. With template you can create your micro-service&#39;s that hosted in our system to help you create and modify api responses beyond just text outputing.</p>
<h2 id='registration'>Registration</h2>
<blockquote>
<p><img src="images/dahi-register.png" alt="register" /></p>
</blockquote>

<p><a href="http://dahi.ai/register">Go to Register Page</a></p>

<p>Registering is easy, just go to <a href="http://dahi.ai/register">register page</a>. Type your name, surname, email, password and repeat the same password. Click to register button and you&#39;re done.</p>

<p>Dahi.ai Platform is free. You can start to create your chat-bot without coding required.</p>

<aside class="notice">
If you want to upgrade your account to premium tier you can contact us from <a class="mailto" href="mailto:info@yapaytech.com">info@yapaytech.com</a>
</aside>
<h1 id='bot'>Bot</h1>
<blockquote>
<p><img src="images/dahi-bot.png" alt="dahi-bot" /></p>
</blockquote>

<p>Here you can create, delete and modify your chat-bots. </p>

<ul>
<li>To edit this bot&#39;s intent click over it.</li>
<li>To edit this bot&#39;s name or delete it click to the settings button at the right of the list.</li>
<li>To create new bot click to &quot;Add new Bot&quot; button.</li>
</ul>
<h2 id='bot-create'>Bot Create</h2>
<blockquote>
<p><img src="images/dahi-bot-create.png" alt="bot-create" /></p>
</blockquote>

<p>Creating a new bot is easy you just have to give it a name and select which language you want to create a bot. Click &quot;done&quot; button to finishing the bot creation. You can change this settings after in chat settings page.</p>
<h2 id='bot-intents'>Bot Intents</h2>
<blockquote>
<p><img src="images/dahi-intent.png" alt="bot-intents" /></p>
</blockquote>

<p>This is where we can add logic to our bot. Every intent is responsible for a job. Some to detect user inputs and response, some to create more complex logic to improve user engagement.</p>

<p>For more information <a href="#intent">check out intent documentation section</a></p>
<h1 id='intent'>Intent</h1><h2 id='how-to-create-intent'>How to Create Intent?</h2><h3 id='basic-intent-hello-world'>Basic Intent - Hello World</h3>
<blockquote>
<p>Hello World!
<img src="images/intent_2.png" alt="alt text" /></p>
</blockquote>

<p>I will show you how to create an easy intent to your bot.
Let&#39;s make a Hello World! intent.
This intent has just one job. Whenever user says hello, it will make to your bot response as &#39;Hello World&#39;.</p>

<ol>
<li>Select your bot from bots list.</li>
<li>Click Intents on the left side.</li>
<li>Click ADD button in the opening page.</li>
<li>Name your intent.</li>
<li>Type your inputs on the Define User Says section and press enter.</li>
<li>Enter your output text which will be shown to yours.</li>
<li>Finally, Save your intent with save button on the upper-right corner.</li>
</ol>
<h3 id='advanced-intent'>Advanced Intent</h3><h2 id='input'>Input</h2>
<p>On here, you are defining what user inputs will trigger your intent. You can enter a long sentence here as well as a single word. It&#39;s all about what user&#39;s input should activate your intent. </p>

<p>After entered your sentence, you can see each word are clickable. You can select those words for marking them as required word. This mean whenever user enter an input sentence, system check this sentence with each input row and activate it if and only if sentence contains row&#39;s all required words.</p>

<p>If there are some unnecessary or wrong sentences you can remove them with delete button on the right side.</p>
<h2 id='variables'>Variables</h2><h3 id='what-is-variable'>What is Variable?</h3>
<p>Variable is a value that can change, depending on conditions or on information passed to the intent. It is useful for store the value and use it on other part in the intent such as operation section or forward section.</p>
<h3 id='how-to-create-variable'>How to create Variable?</h3>
<p>Enter your variable&#39;s name to input area below Define Variable header. After you enter, there will be a row about its attributes. </p>

<blockquote>
<p><img src="images/intent_inp_1.png" alt="alt text" /></p>
</blockquote>

<table><thead>
<tr>
<th style="text-align: center">Key</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center">Name</td>
<td>Name of your variable. It must be unique.(Required)</td>
</tr>
<tr>
<td style="text-align: center">Type</td>
<td>Variable type. You can choose one of the 12 types in the list such as Text, Array etc. Please look Variable Type for further info. (Required)</td>
</tr>
<tr>
<td style="text-align: center">Entity</td>
<td>Required for only array-like variable types. You can select from your entities or system entities.</td>
</tr>
<tr>
<td style="text-align: center">Question</td>
<td>If variable has no value, system will prompt this area text to user and will set the answer to this variable. (Required)</td>
</tr>
<tr>
<td style="text-align: center">Details</td>
<td>You can set some specific values to your variable in here such as regex or default value. For further info please look Extras section.</td>
</tr>
<tr>
<td style="text-align: center">Remove</td>
<td>This button will remove the variable row.</td>
</tr>
</tbody></table>

<blockquote>
<p><img src="images/intent_inp_2.png" alt="alt text" /></p>
</blockquote>

<p>After filling all required areas now your variable is ready to use it. 
In anywhere in the intent you can call your variable with {$myVariableName}. </p>
<h2 id='variable-types'>Variable Types</h2>
<table><thead>
<tr>
<th style="text-align: center">Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center">Text</td>
<td>For string values</td>
<td><code>Hello</code></td>
</tr>
<tr>
<td style="text-align: center">Int</td>
<td>For integer values</td>
<td>12456</td>
</tr>
<tr>
<td style="text-align: center">Regex</td>
<td>For string values with regex matching. Needs regex key.</td>
<td><code>es123</code> with regex:<code>\w{2}\d{3}</code></td>
</tr>
<tr>
<td style="text-align: center">Identifier</td>
<td>For 11 digit country identification number. Only for turkey right now.</td>
<td>12345678901</td>
</tr>
<tr>
<td style="text-align: center">Location</td>
<td>For location value such as location sharing messages</td>
<td>41.015137,28.979530</td>
</tr>
<tr>
<td style="text-align: center">Email</td>
<td>For email values</td>
<td>myemail@yapaytech.com</td>
</tr>
<tr>
<td style="text-align: center">Phone</td>
<td>For phone type values</td>
<td>05xx322xxxx, +905xx322xxxx, 5xx322xxxx</td>
</tr>
<tr>
<td style="text-align: center">Datetime</td>
<td>For Date and Time values</td>
<td>tomorrow at 3pm</td>
</tr>
<tr>
<td style="text-align: center">Time</td>
<td>For Time values</td>
<td>at 3pm</td>
</tr>
<tr>
<td style="text-align: center">Date</td>
<td>For Date Values</td>
<td>3 day later, tomorrow</td>
</tr>
<tr>
<td style="text-align: center">Array</td>
<td>For Text array selections</td>
<td></td>
</tr>
<tr>
<td style="text-align: center">Horizontal Scroll Array</td>
<td>For Horizontal Card selections</td>
<td></td>
</tr>
<tr>
<td style="text-align: center">Multi Array</td>
<td>For Text array selections with ability to select multiple answer</td>
<td></td>
</tr>
</tbody></table>
<h2 id='variable-keys-options'>Variable Keys options</h2>
<blockquote>
<p><img src="images/regex_filter.png" alt="regex-filter" />
<img src="images/regex_filter_key.png" alt="regex-filter-key" /></p>
</blockquote>

<ol>
<li>default: default value for variable if a value is not defined for it.</li>
<li>regex_filter: regex detect for type <code>Text</code> variable.</li>
<li>regex_filter_index: regex group index to select. Needs regex_filter. In the example if a user types test 123 our paramater would put 123 to variable.</li>
<li>regex: regex detect for type <code>Regex</code> variable.</li>
</ol>

<p>Regex type is a little bit different from Text type. Text type with regex_filter would try to detect value from first message that triggers this intent and fill the variable but if he can&#39;t find a value matches with regex it would ask the variable question to user to fill the variable. In this case user can provide any string answer to this variable without limits of regex. In short in Text type with regex_filter, regex is used only for first time value detection. </p>

<p>If you want to do a custom matching rules that must be followed by user answer like a project number that has to start with 2 string and end with 3 number you can use <code>Regex</code> variable type with regex key defined as <code>\w{2}\d{3}</code>. In this case this regex will be used for initial value detection and after when is question asked to user. With this you can set custom rules for variables.</p>

<p>You can alse use <code>{key}</code> system to fill variable default value or question. Like you have 2 paramater first one ask&#39;s the users name and the second one ask&#39;s user email you can define second question like <code>Hello, {name}. Please provide a valid email for further contact</code>.</p>
<h2 id='variable-tojson'>Variable tojson</h2>
<blockquote>
<p><img src="images/tojson.png" alt="tojson" /></p>
</blockquote>

<p>You can print value of variable to string with tojson helper. You just need to add .tojson() to end of variable name like <code>{places.tojson()}</code>. You can also output to operations.</p>
<h2 id='output'>Output</h2>
<blockquote>
<p><img src="images/intent-output-text.png" alt="intent-output-text" />
<img src="images/intent-city.png" alt="intent-city" />
<img src="images/intent-city-test.png" alt="intent-city-test" /></p>
</blockquote>

<p>Output section is to define what will bot reply to user at the end of this intent. If you don&#39;t want to send a message at the end of this intent you can leave this section empty. There are couple of types of outputs like text, typing, image, video...</p>

<table><thead>
<tr>
<th style="text-align: right">Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right">Text</td>
<td>Plain text message type.</td>
</tr>
<tr>
<td style="text-align: right">Typing</td>
<td>Sending typing... message and wait x sec before sending next message.</td>
</tr>
<tr>
<td style="text-align: right">Array</td>
<td>Send a text message with a array of buttons.</td>
</tr>
<tr>
<td style="text-align: right">Horizontal Array</td>
<td>Send a generic-template type message with cards.</td>
</tr>
<tr>
<td style="text-align: right">Image</td>
<td>Send a image.</td>
</tr>
<tr>
<td style="text-align: right">Video</td>
<td>Send a video</td>
</tr>
<tr>
<td style="text-align: right">Custom</td>
<td>Send a custom formatted text. (for custom api and endpoint usage).</td>
</tr>
</tbody></table>

<p>You can create more than one output for the same intent. To do so just click the <code>CREATE NEW OUTPUT</code> button.</p>

<p>To use variables in your intent you can use <code>{&lt;key&gt;}</code>. For example if our paramater name is city. We can get city name in output like this <code>Weather status for {city} is sunny</code>. If you want to key-extra values you can chain with <code>.</code> like a normal json object. For example in our <code>sys.city</code> entity we have plate code for each city of Turkey in <code>code</code> keyword. We can use it like this <code>{city.code} is the plate number of {city} city.</code>.</p>

<p>Or if you want to print something from <code>GET</code> or <code>POST</code> operation you can use <code>return</code> variable name like <code>{return.name}</code>.</p>
<h2 id='operation'>Operation</h2>
<blockquote>
<p><img src="images/create_op.png" alt="create_op" /></p>
</blockquote>

<p>Operation is a way to trigger an external resource event or save to cache. There are two types of operation. These are as follow...</p>

<table><thead>
<tr>
<th style="text-align: right">Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right">Call Service</td>
<td>Get or Post web request operation</td>
</tr>
<tr>
<td style="text-align: right">Cache</td>
<td>Save to cache a variable operation</td>
</tr>
<tr>
<td style="text-align: right">ForwardToAgent</td>
<td>Disables bot and forward the conversation to agent waiting list.</td>
</tr>
</tbody></table>
<h2 id='call-operation'>Call Operation</h2>
<blockquote>
<p><img src="images/ope-get.png" alt="operation get" />
Try Get Screen
<img src="images/ope-get-try.png" alt="operation get try" />
Json Picker Button
<img src="images/ope-get-picker.png" alt="operation json picker" />
Json Picker Screen
<img src="images/ope-get-picker-screen.png" alt="operation json picker screen" />
How to use in output section
<img src="images/ope-get-output.png" alt="operation output" />
Demo test for this intent
<img src="images/ope-get-chat.png" alt="operation chat" /></p>
</blockquote>

<p>Call Service is a way to interact with external resources or apis. There are two types of Call Service currently available.</p>

<table><thead>
<tr>
<th style="text-align: right">Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right">GET</td>
<td>GET Http request</td>
</tr>
<tr>
<td style="text-align: right">POST</td>
<td>POST Http request</td>
</tr>
</tbody></table>

<p>In these operation types you can use following options</p>

<table><thead>
<tr>
<th style="text-align: right">Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right">Uri</td>
<td>Http request url. Can use our variables here like <code>http://jsonplaceholder.typicode.com/posts/{id}</code></td>
<td>Yes</td>
</tr>
<tr>
<td style="text-align: right">Headers</td>
<td>Json object as string to use as header. Example: <code>{&quot;content-type&quot;:&quot;application/json&quot;}</code></td>
<td>No</td>
</tr>
<tr>
<td style="text-align: right">Data</td>
<td>Json object as string to use as post body. Example: <code>{&quot;username&quot;:&quot;test&quot;}</code>. You can also use our variable printing markup here like <code>{&quot;username&quot;:&quot;{name}&quot;}</code></td>
<td>No</td>
</tr>
<tr>
<td style="text-align: right">Try Get</td>
<td>A way to test your endpoint if it&#39;s working with our system</td>
<td>No</td>
</tr>
</tbody></table>

<p>In Try Get screen you can check if your endpoint is working correctly with our system. And save as example data to used in json-picker section. Json picker is a variable generator with gui. You can click the <code>+</code> button at the right of the text output to access to json-picker. After that you&#39;ll see a screen with mock data from your last try get.</p>
<h2 id='cache-operation'>Cache Operation</h2>
<blockquote>
<p><img src="images/op_cache_set.png" alt="op_cache_set" /></p>
</blockquote>

<p>You can either set or clear a key in user.prop scope with this operation. To use this you need to define your key in first textbox and value in second textbox. For example; <code>user.prop.lastKey</code> and <code>{{key}}</code>. To use this value in intents you need to start your key with $ character like <code>{{$user.prop.lastKey}}</code>.</p>
<h2 id='forwardtoagent-operation'>ForwardToAgent Operation</h2>
<p>This operation disables bot in this conversation and puts the conversation agent waiting list.</p>
<h2 id='forward'>Forward</h2>
<p>Forwards are basicly for branching to the other intents with specific conditions or without any. With this, you can use power of modularity. </p>

<p>For example, you are asking users to their informations. After you get their infos, you want to trigger different intent lets say &#39;confirm&#39; intent and only over 18 aged user should reach this intent. After it matched with our condition(s), then we will pass the this intent&#39;s paramater values to forwarded intent.</p>

<p>You can do it with 4 easy step and these are as follows...</p>
<h3 id='creating-forward-panel'>Creating Forward Panel</h3>
<ol>
<li>Press the &#39;Create New Forward&#39; button.</li>
</ol>
<h3 id='adding-condition'>Adding Condition</h3>
<p>Here we define our condition</p>

<blockquote>
<p><img src="images/forward1.PNG" alt="Add Condition" /></p>
</blockquote>

<ol>
<li>Press &#39;Add Condition&#39; button</li>
<li>Enter your variable  (For our example : {age})</li>
<li>Select your condition type (For our example : greater than or equal )</li>
<li>Type your conditional value (For our example : 18)</li>
<li>Confirm it</li>
</ol>

<blockquote>
<p><img src="images/forward2.PNG" alt="Select Intent" /></p>
</blockquote>

<p>If you want to edit any condition after confirm, you can just click over the condition line then change any part of it.</p>
<h3 id='select-intent'>Select Intent</h3>
<ol>
<li>Select our desired intent (For our example : Confirm)</li>
</ol>
<h3 id='passing-values'>Passing Values</h3>
<blockquote>
<p><img src="images/forward3.PNG" alt="Passing Values" /></p>
</blockquote>

<ol>
<li>Press the &#39;show params&#39; button</li>
<li>Enter your variable names or constant </li>
</ol>
<h3 id='notes'>Notes</h3>
<p>We created one forward with single condition in our example but you can define multi forwards with multi conditions.</p>

<p>The important part is a forward section will only do forward only if previous forwards fails and its all conditions matches.</p>
<h1 id='entity'>Entity</h1>
<blockquote>
<p><img src="images/entity-list.png" alt="entity-list" /></p>
</blockquote>

<p>Entity is a list of object that our bot can use to recognize data or ask question.</p>

<p>For example; if we want to ask user which is their favaurite color. We can fill an <code>colors</code> named entity with all known colors and link it to the question with using intent paramaters.</p>

<p>There are currently two types of entity. Array and Horizontal, array is for any data list and horizontal for facebook generic-template outputs.</p>
<h2 id='add-entity'>Add Entity</h2>
<blockquote>
<p><img src="images/entity-add.png" alt="entity-list" /></p>
</blockquote>

<p>To add a new entity follow these steps:</p>

<ol>
<li>click to <code>ADD</code> button at the right top corner in entity list page.</li>
<li>Type entity name at left top corner of section.</li>
<li>Select which type of entity you want to create array(default) or horizontal. You can&#39;t change this after creating an entity.</li>
<li>Type your data.</li>
<li>Click <code>SAVE</code> button to save it.</li>
</ol>
<h2 id='edit-entity'>Edit Entity</h2>
<blockquote>
<p><img src="images/entity-colors.png" alt="entity-list" /></p>
</blockquote>

<p>To edit an entity click it&#39;s name, then you can type any new text in to <code>Define Item</code> section and press enter to add it to the list.</p>

<p>In this screen you can also modify any item&#39;s name, sysnoms, keys or delete them if you want.</p>

<p>To save click <code>SAVE</code> button at right top corner.</p>
<h2 id='types'>Types</h2>
<p>There are currently two types of entity. Array and Horizontal, array is for any data list and horizontal for facebook generic-template outputs.</p>
<h3 id='array'>Array</h3>
<blockquote>
<p><img src="images/entity-colors.png" alt="entity-list" /></p>
</blockquote>

<p>This is a text based list entity type. Can be used for <code>array</code>, <code>text</code> and <code>multi-array</code> type paramaters.</p>

<p>To add a new element type Reference Value that you want to add in <code>Define Item</code> section and press enter.</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right">Reference Value</td>
<td>Display text value</td>
<td>Yes</td>
</tr>
<tr>
<td style="text-align: right">Synonyms</td>
<td>Equivalents of value to detech for this element.</td>
<td>No</td>
</tr>
<tr>
<td style="text-align: right">Default</td>
<td>is default repiresantation of entity</td>
<td>No</td>
</tr>
<tr>
<td style="text-align: right">Keys</td>
<td>key-value pairs for this entity, can be used by chat-bot.</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='horizontal'>Horizontal</h3>
<blockquote>
<p><img src="images/entity-card.png" alt="entity-card" /></p>
</blockquote>

<p>This is a horizontal card entity. Can be used for outputing generic-template messages.</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Description</th>
<th>Required</th>
<th>Limits</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right">Title</td>
<td>Title value for this card item.</td>
<td>Yes</td>
<td>0-80 Character</td>
</tr>
<tr>
<td style="text-align: right">Image_url</td>
<td>Image url for this card item.</td>
<td>No</td>
<td>Must be a valid image url.</td>
</tr>
<tr>
<td style="text-align: right">Subtitle</td>
<td>Subtitle for this card item.</td>
<td>No</td>
<td>0-80 Character</td>
</tr>
<tr>
<td style="text-align: right">Item_url</td>
<td>Url to open if this card is clicked.</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td style="text-align: right">Extra</td>
<td>key-value pairs to define values that can be used by chat-bot</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td style="text-align: right">Buttons</td>
<td>Interactive buttons (open web wage, trigger intents, etc.)</td>
<td>No</td>
<td>Maximum 3 button</td>
</tr>
</tbody></table>
<h4 id='buttons'>Buttons</h4>
<blockquote>
<p><img src="images/hor-but-list.png" alt="horizontal-button-list" />
<img src="images/hor-but-web.png" alt="horizontal-button-web" />
<img src="images/hor-but-int.png" alt="horizontal-button-intent" /></p>
</blockquote>

<p>There is two types of buttons here. One is to open web url, second one is to trigger an intent. You can click to <code>Add new Button</code> button and configure what you want to add. </p>

<p>There are 3 things to chose when adding button. Button text, button type (web_url,postback) and value of the button. For web_url value must be web url. For postback you can chose a intent from combo-box. And click tick button to add button.</p>

<aside class="notice">
Don't forget to click save before exiting to save.
</aside>

<p>Some extra information:</p>

<ul>
<li>You can reorder buttons with holding hook at the left of the buttons and drag them.</li>
<li>To edit buttons click over them.</li>
<li>To delete button click red trash button.</li>
<li>To change type of button click the url and arrow button at the center of button edit view. Arrow button represent payload type. Url button for web_url type.</li>
</ul>
<h1 id='live'>Live</h1>
<p>Live-Chat can be described as a messaging system. <a href="http://dahi.ai/live">http://dahi.ai/live</a></p>

<p>Dahi.ai composed of two system first is chat bots. Second is messaging system aka. Live-chat. Live-chat is most easy way to provide a user integration system without any hurdle.</p>

<p>Also with live-chat&#39;s agent section you can use live-chat as a mix of chat-bot and customer service. With doing so your chat-bot can answer most of the user&#39;s questions and if it can&#39;t answer user&#39;s question can pass the conversation to agents.</p>

<p>Live-chat&#39;s some features;</p>

<ul>
<li>Provide a javascript chat script that can be added to any website.</li>
<li>Connect a facebook page to chat-bot system.</li>
<li>Feature to set when will chat-bot be active. (always or outside of work hours)</li>
<li>Add wellcome message to your chat-bot.</li>
<li>Can work with Chat-bot and Customer Service Agents at the same time.</li>
</ul>
<h2 id='live-settings'>Live Settings</h2>
<p>In this section you can modify your live-chat, add agents, connect live-chat to a facebook chat and more. <a href="http://dahi.ai/live/settings">http://dahi.ai/live/settings</a></p>
<h3 id='main-settings'>Main Settings</h3>
<p>Main live-chat settings.</p>

<blockquote>
<p><img src="images/live-settings.png" alt="Live-Settings" /></p>
</blockquote>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right">Chat Name</td>
<td>Live Chat Name</td>
</tr>
<tr>
<td style="text-align: right">Product Type</td>
<td>Your product&#39;s subscribtion tier. (Free or Premium)</td>
</tr>
<tr>
<td style="text-align: right">Bot</td>
<td>Section to select which bot is connected to live-chat. You can select any of your chat-bot.</td>
</tr>
<tr>
<td style="text-align: right">Edit Persistent Menu</td>
<td>Section to edit your chat-bot&#39;s shortcut menu. <a href="#persistent-menu">For More Information</a></td>
</tr>
<tr>
<td style="text-align: right">When Bot Active</td>
<td>Section to select when will your bot will be active. Always or Outside of Work Hours (Hidden if bot isn&#39;t selected.)</td>
</tr>
<tr>
<td style="text-align: right">Working Hours</td>
<td>Section to configure your working hours. (Hidden if Always Selected in When Bot is Active)</td>
</tr>
</tbody></table>
<h3 id='agent-settings'>Agent Settings</h3>
<blockquote>
<p><img src="images/live-agent.png" alt="Live-Agent" /></p>
</blockquote>

<p>Where you can add or remove your live-chat agents.</p>

<p>To add a agent there are some requirements.</p>

<ol>
<li>You must be owner of the live-chat.</li>
<li>The mail adress you&#39;re trying to add as a agent must be registered user of dahi.ai.</li>
<li>The mail adress you&#39;re trying to add as a agent must not be owner or agent of another live-chat.</li>
</ol>

<p>Adding an agent is easy;</p>

<ol>
<li>Click &quot;Add New&quot; Button at the right of the screen in agent section.</li>
<li>Type the mail adress of user you want to add as agent.</li>
<li>Click &quot;Add&quot; Button. And that&#39;s it.</li>
</ol>
<h3 id='live-widget-script'>Live-Widget Script</h3>
<blockquote>
<p><img src="images/live-widget.png" alt="Live-Script" /></p>
</blockquote>

<p>This is the script you can use to add a live chat that your visitors can use to chat with your chat-bot or agents.
Click &quot;Copy to Clipboard&quot; and paste the script in your website somewhere.</p>
<h3 id='live-widget-script-settings'>Live-Widget Script Settings</h3>
<blockquote>
<p><img src="images/live-script-general.png" alt="Live-Script" /></p>
</blockquote>
<h5 id='general-settings'>General Settings</h5>
<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right">Chat Name</td>
<td>Live-chat name that shown to user in live-chat script.</td>
</tr>
<tr>
<td style="text-align: right">Image Url</td>
<td>Live chat user image that shown to user.</td>
</tr>
<tr>
<td style="text-align: right">Width Size</td>
<td>Live chat script width size. (px)</td>
</tr>
<tr>
<td style="text-align: right">Height Size</td>
<td>Live chat script height size. (px)</td>
</tr>
<tr>
<td style="text-align: right">Enoji</td>
<td>Add abilty to send emojis in live-chat</td>
</tr>
<tr>
<td style="text-align: right">User Invites</td>
<td>Add abilty to invite other users to chat.</td>
</tr>
<tr>
<td style="text-align: right">Widget Type</td>
<td>Widget type. Currently cirle or widgetbox.</td>
</tr>
</tbody></table>

<blockquote>
<p><img src="images/live-script-register.png" alt="Live-Script" /></p>
</blockquote>
<h4 id='register-settings'>Register Settings</h4>
<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right">Name Surname</td>
<td>When chat start should live-chat ask for user&#39;s name setting.</td>
</tr>
<tr>
<td style="text-align: right">Email Adress</td>
<td>When chat start should live-chat ask for user&#39;s email setting.</td>
</tr>
<tr>
<td style="text-align: right">Phone Number</td>
<td>When chat start should live-chat ask for user&#39;s phone number setting.</td>
</tr>
</tbody></table>
<h4 id='color-settings'>Color Settings</h4>
<p>Where you can change live-chat color palatte.</p>
<h4 id='language-settings'>Language Settings</h4>
<p>Where you can change live-chat language options or placeholder texts.</p>
<h2 id='facebook-integration'>Facebook Integration</h2>
<blockquote>
<p><img src="images/live-face-integration.png" alt="Live-Script" /></p>
</blockquote>

<p>Here you can connect any of your facebook page to live-chat. Any message that your page recieve will be forward to live-chat and vice versa. In live-chat agent section you can view and response to messages your live chat recieve. Or if your live-chat has any chat-bot connected, it will automaticly reply to your customer&#39;s questions. This is the easiest way to connect your chat-bot to any facebook page.</p>

<p>To connect a page to live chat follow this steps.</p>

<ol>
<li>Connect to facebook.</li>
<li>Give permissions to Dahi.ai Chatbot.</li>
<li>Click the &quot;Connect to Page&quot; button at the right of the page list.</li>
</ol>
<h2 id='live-chat-test-page'> Live-chat Test Page</h2>
<blockquote>
<p><img src="images/live-test-page.png" alt="Live-Test" /></p>
</blockquote>

<p>In the live-chat settings page at the right bottom corner of your screen you will a &quot;Go To Your Client Test Page&quot; Button. This will open a page where you can test your live chat and simulate an user interaction.</p>

<p><img src="images/live-test.png" alt="Live-Test" /></p>

<p>With this you can test your script and chat-bot before you add it to your website or facebook page.</p>
<h2 id='persistent-menu'>Persistent Menu</h2>
<blockquote>
<p><img src="images/face-persistent.png" alt="Live-Persistent-Menu" />
<img src="images/live-persistent.png" alt="Live-Persistent-Menu" /></p>
</blockquote>

<p>Persistent Menu is a way to add shortcut buttons to live-chat and provide user with some go to options. You can add payload or web_url buttons in persistent menu.</p>

<p>Payload buttons will trigger an intent start event when user will click on them. With this button you can add some shortcuts to your intents.</p>

<p>Web_Url buttons will trigger an open web-view event in mobile and open url in new tab in pc. With this you can forward your users some external sites or resources like when an user want to buy your latest song you can put a link to your itunes page here.</p>

<p>Some extra information</p>

<ul>
<li>Persistent Menu is supported both by facebook messenger and live-chat script.</li>
<li>You can have maximum 3 buttons in facebook.</li>
<li>You can reorder your buttons using hook at the right of the buttons in persistent menu editor. (visible when mouse is hovered in a line)</li>
<li>Support for more button and nested buttons are in development. When it&#39;s ready we&#39;ll be updating this editor section.</li>
</ul>

<p><img src="images/persistent.png" alt="Persistent-Menu" /></p>
<h2 id='live-agent-panel'>Live Agent Panel</h2>
<blockquote>
<p><img src="images/agent-panel.png" alt="Live-Agent" /></p>
</blockquote>

<p>Live Agent Section is where you can see your live-chat conversations, join them to answer user&#39;s questions where your bot is not able to or see whether your chat-bot did stuck at some type of questions. </p>

<p>This is where you and your agents can interact with live-chat and your customers.</p>

<p>Here you can select an user at the right of the screen and see their conversation history.
If you want to join the chat and answer instead of chat-bot you can click the &quot;Join Conversation&quot; Button at the right top corner of the panel. And when you want to give back the conversation to chat-bot just click the &quot;Leave Conversation&quot; Button.</p>

<p>At the right of the screen you can see 3 tabs at the top of the users list. You can use this options to filter users.</p>

<ul>
<li>All: Every user that is currently is talking to bot or you.</li>
<li>Open: Every user that is currently is talking to bot or no-one.</li>
<li>Bound: Every user that is currently is talking to you.</li>
</ul>

<p>If a conversation is bound to any agent, bot will not answer any question that customer is asking. So to enable bot again either you should leave conversation when you don&#39;t want to talk to the user anymore or end the conversation if you think is user won&#39;t be asking any more question anytime soon.</p>

<p>Some extra information</p>

<ul>
<li>At the right bottom corner of user images in user list you can see which platform user is coming from.</li>
<li>At the left of the names of user in user list you can see if the user is online or not. (green for online, grey for offline)</li>
<li>If you click the big (i) button or name of the user at the top of the message panel you can see more information about this user.</li>
<li>At the left of the join button you can see if the current conversation is bound to whom or is bount to bot or not.</li>
</ul>
<h2 id='live-analytics'>Live Analytics</h2>
<blockquote>
<p><img src="images/live-analytics.png" alt="live-analytics" /></p>
</blockquote>

<p>Here you can find some usefull information about your live-chat bot and usage information. Currently this section is in development.</p>
<h1 id='api'>Api</h1>
<blockquote>
<p>To use our endpoint you need to use this code:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
  http://api.dahi.ai/dh/bot/tkn/59fff527e4b0cf33abf0c959 <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'x-requested-with: XMLHttpRequest'</span> <span class="se">\</span>
  -d <span class="s1">'{"recipientId":"user_id" , "message":{ "text":"yemek"}}'</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code>user_id</code> with a user_id and <code>59fff527e4b0cf33abf0c959</code> with your bot id.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">request</span><span class="w"> </span><span class="err">body</span><span class="w"> </span><span class="err">example</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"recipientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_id"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">


</span><span class="err">#</span><span class="w"> </span><span class="err">response</span><span class="w"> </span><span class="err">body</span><span class="w"> </span><span class="err">example</span><span class="p">,</span><span class="w"> </span><span class="err">there</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">more</span><span class="w"> </span><span class="err">information</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">removed</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">example.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"array"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Message</span><span class="w"> </span><span class="err">Type</span><span class="w">
      </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Buttons</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">type</span><span class="w"> </span><span class="err">message</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dışarıda Yemek İstiyorum"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"extra"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"kisa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dışarıda"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59fff930e4b0cf33abf0c984_16"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Burada Yemek İstiyorum"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"extra"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59fff930e4b0cf33abf0c984_17"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nerede Yemek İstersiniz?"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Message</span><span class="w"> </span><span class="err">Text</span><span class="w">
    </span><span class="p">}],</span><span class="w">
    </span><span class="s2">"conversation_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"conversation id"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can use our dahi.ai chat-bot platform with our endpoint.</p>

<p>You can learn your bot&#39;s bot_id (bot token) from bot settings page.</p>

<p><code>http://api.dahi.ai/dh/bot/tkn/{bot_id}</code></p>

<p>From response <code>result.messages</code> array is the response messages array.</p>
<h1 id='template'>Template</h1><h2 id='what-is-template'>What is Template</h2>
<blockquote>
<p><img src="images/template-list.PNG" alt="template-list" />
<img src="images/template-edit.PNG" alt="template-edit" /></p>
</blockquote>

<p>Template is a way to create message data that supported by dahi.ai. If you want to create a horizontal scroll array message from your REST api data, you can use template feature to create a middleware REST api.</p>

<p>When you created a template if you revisit it&#39;s edit page you will see a url like <code>https://template.maytap.me/service/59f71e0de0aadb6b3ec6256c</code> that you can use to access to this template from any service. You&#39;ll get a unique id for each one of your templates. This REST service can be called with <code>GET</code> and <code>POST</code> methods. You can find more information in <code>USAGE</code> section</p>

<p>Template system is new and still under development and curently is <code>BETA</code> stage. When we update this system your old schemes might break.</p>

<p>Also our variable access system in template is different from dahi.ai&#39;s chat-bot system.</p>
<h2 id='main-paramaters'>Main Paramaters</h2>
<p>Here are some descriptions of which paramater means what.</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Description</th>
<th>Default</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right">name</td>
<td>Label for template, used to identify your templates from each other</td>
<td>No Default</td>
<td>String</td>
<td>No</td>
</tr>
<tr>
<td style="text-align: right">uri</td>
<td>If your template needs to call a external <code>REST</code> service to extract data from you need to define it here.</td>
<td>No Default</td>
<td>String</td>
<td>No</td>
</tr>
<tr>
<td style="text-align: right">method</td>
<td>Which method used to call your uri call. <code>GET</code> or <code>POST</code></td>
<td>GET</td>
<td>String</td>
<td>No</td>
</tr>
<tr>
<td style="text-align: right">dahi</td>
<td>Which shema</td>
<td>0</td>
<td>Number</td>
<td>No</td>
</tr>
<tr>
<td style="text-align: right">data</td>
<td>Static data that can be used by this template with <code>{{#data.variableName}}</code></td>
<td>{}</td>
<td>Object</td>
<td>No</td>
</tr>
<tr>
<td style="text-align: right">schemas</td>
<td>Schemas array. Look at shemas section for more information</td>
<td>[]</td>
<td>Array</td>
<td>Yes</td>
</tr>
</tbody></table>

<p>For uri you can use your static data or post data values. For more information check Paramater System Section</p>
<h2 id='schemas'>Schemas</h2>
<blockquote>
<p><img src="images/template-schema.PNG" alt="template-schema" /></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Output</span><span class="w"> </span><span class="err">examples</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">schema</span><span class="w">
</span><span class="err">//</span><span class="w"> </span><span class="err">GET</span><span class="w"> </span><span class="err">https</span><span class="p">:</span><span class="err">//template.maytap.me/service/</span><span class="mi">59</span><span class="err">f</span><span class="mi">71</span><span class="err">e</span><span class="mi">0</span><span class="err">de</span><span class="mi">0</span><span class="err">aadb</span><span class="mi">6</span><span class="err">b</span><span class="mi">3</span><span class="err">ec</span><span class="mi">6256</span><span class="err">c</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"multi_message"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sunt aut facere repellat provident occaecati excepturi optio reprehenderit is where"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qui est esse is where"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ea molestias quasi exercitationem repellat qui ipsa sit aut is where"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eum et est occaecati is where"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">GET</span><span class="w"> </span><span class="err">https</span><span class="p">:</span><span class="err">//template.maytap.me/service/</span><span class="mi">59</span><span class="err">f</span><span class="mi">71</span><span class="err">e</span><span class="mi">0</span><span class="err">de</span><span class="mi">0</span><span class="err">aadb</span><span class="mi">6</span><span class="err">b</span><span class="mi">3</span><span class="err">ec</span><span class="mi">6256</span><span class="err">c?s=</span><span class="mi">1</span><span class="err">&amp;data.y=</span><span class="mi">12</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"multi_message"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12 15"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Shema is a mapping style to used to create a output data. Your uri, method, data, REST Response from your uri, post body, query paramaters etc. can be used here. There are some keywords helper can be used here other than that you can also use Paramater System to import data to string values. Chat-bot system uses a specific message recognition from Call Service Operation if response from a Call Service is json and has <code>{multi_message:true,messages:[]}</code> Keyword it&#39;ll automaticly try to look messages array to and create messages from this array to send to the user. And objects in this array must be message formatted objects. For text message it can be like this <code>{type:&quot;text&quot;,text:&quot;Hello, World!&quot;}</code>. This will create a <code>Hello, World!</code> message and send it as a response to the user. Because it&#39;s an array you can send multiple messages in one request call.</p>

<p>In this example there are two schemas first one has <code>__each,__type,__limit</code> helpers and <code>type,text</code> key-value pairs. You can find more information in Helpers Section and how <code>{{}}</code> works can be found in Paramater System.</p>

<p>We&#39;re adding more helpers and features according to the customers needs. If you think a helper would improve or help customers to create their templates easly you can contact us through <code>info@yapaytech.com</code>. Your suggestion must not break old shemas.</p>
<h2 id='paramater-system'>Paramater System</h2>
<p>Paramater system currently can be used in 3 section <code>__if</code> helper, <code>uri</code> string for template and <code>string</code> values in schema. Check helpers section for more information for __if helper.</p>
<h3 id='uri'>URI</h3><pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
  <span class="s1">'https://template.maytap.me/service/59f71e0de0aadb6b3ec6256c?data.id=2'</span>

or

curl -X POST <span class="se">\</span>
  https://template.maytap.me/service/59f71e0de0aadb6b3ec6256c <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -d <span class="s1">'{"data":{"id":1}}'</span>
</code></pre>
<p>First of all let&#39;s say we want to pass a paramater to uri from post body we use to call template endpoint or get query paramaters to call template endpoint. At this point of system (creation of url) you have access to static data from template object, and body object. More info about body object can be found in Usage Section.</p>

<p>For example let&#39;s say our uri is like this <code>https://jsonplaceholder.typicode.com/posts/{{id}}</code>.
Here it will try to access data.id value from body. So we want to send id paramater in data here(As shown in examples at right section). As default <code>{{key}}</code> would try to read &#39;key&#39; data from request.body.data object. If you want to access to static data from your template you can use <code>{{#data.x}}</code> shown in second schema.</p>
<h3 id='in-string-values'>In string values</h3><pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">url</span><span class="p">:</span><span class="w"> </span><span class="err">https</span><span class="p">:</span><span class="err">//template.maytap.me/service/</span><span class="mi">59</span><span class="err">f</span><span class="mi">71</span><span class="err">e</span><span class="mi">0</span><span class="err">de</span><span class="mi">0</span><span class="err">aadb</span><span class="mi">6</span><span class="err">b</span><span class="mi">3</span><span class="err">ec</span><span class="mi">6256</span><span class="err">c?s=</span><span class="mi">1</span><span class="err">&amp;data.y=</span><span class="mi">12</span><span class="w">
</span><span class="err">//</span><span class="w"> </span><span class="err">Schema</span><span class="w"> </span><span class="err">object</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">example</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://jsonplaceholder.typicode.com/posts"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dahi"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"schemas"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="s2">"__each"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"__type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"custom"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"__limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{title}} is where"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{#body.data.y}} {{#data.x}}"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"__type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"custom"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Output</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">example</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"multi_message"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12 15"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Here <code>{{key}}</code> would try to read from cursor. Cursor is most of the time would point at response recieved from uri request. But if it&#39;s inside an <code>__each</code> helper object it would point at array&#39;s object that currently used to create this iteration. More info <code>__each</code> helper section.</p>

<p>other then that you can access to scope with using # tag. If you want to access to request body that you used to call template you can use <code>{{#body.x}}</code> like if i use <code>https://template.maytap.me/service/59f71e0de0aadb6b3ec6256c?s=1&amp;data.y=12</code> url to call my template (Look at Schema object used in this example) in this call our body object would be <code>{s:1,data:{y:12}}</code> here s:1 means use schemas[1] to create our output. our output text is <code>{{#body.data.y}} {{#data.x}}</code> (from schema[1]) and created output shown at right section. Here you can see #body.data.y and #data.x used. As you can guess you can access to body with #body tag and #data is used to access to template.data object. In this schema it&#39;s just creating a simple message combining a static data stored inside template.data object and a variable from get url call.</p>

<p>Let&#39;s say your api response is <code>{&quot;arr&quot;:[1,2,3,4]}</code> and you want to print second element from arr array. To do so you can use <code>{{arr[1]}}</code> to print it.</p>

<p>Another example with <code>{&quot;test&quot;:{&quot;text&quot;:&quot;hello&quot;}}</code> response data to print hello world we can use <code>{{test.text}}, World!</code> complete shema would look like this. <code>{{__type:&quot;custom&quot;,type:&quot;text&quot;,text:&quot;{{test.text}}, World!&quot;}}</code>. Here __type would wrap our object inside <code>{multi_message:true,messages:[&lt;here our object would be put&gt;]}</code> so dahi.ai can understand that this template a message printing operation. type:&quot;text&quot; is defines what type of message is this. and text would be what will be sended to the user.</p>
<h3 id='javascript-and-accessible-libraries'>Javascript and Accessible libraries</h3>
<p>If you stuck with the thing you want to do and can&#39;t do with other tools you can always use javascript. To use javascript you need to start with an <code>$</code> character like <code>{{$[1,2,3].join(&#39;,&#39;)}}</code>. You can access to current cursor with <code>item</code> variable like <code>{{$item.title.replace(&#39;test&#39;,&#39;&#39;)}}</code> and can access to scope with <code>__root</code> keyword.
For example; if you want to access to data, you could use <code>{{#body.data.y}}</code> would be equal to <code>{{$__root.body.data.y}}</code>.</p>

<p>Libraries that can be accessed from inside of javascript code are as follow; <code>Moment.js (moment)</code><a href="https://momentjs.com/docs/">docs</a>, <code>lodash (_)</code><a href="https://lodash.com/docs/">docs</a>.</p>
<h3 id='html-tags-clear-helper'>Html tags clear helper</h3>
<p>This is a simple clear helper to clear tags like <code>&lt;br&gt;</code> or <code>\n\t</code>. It&#39;s usage is simple. You just need to add <code>!</code> to start of <code>{{}}</code> like <code>{{!title}}</code>. It would get title and then clear extras.</p>
<h2 id='helpers'>Helpers</h2>
<p>Helpers are there to make things easier or add some features that you can do with basic features.</p>

<p>Priority of helpers, and their sub keywords.</p>

<table><thead>
<tr>
<th style="text-align: right">Order</th>
<th>Sub Keys</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right">__type</td>
<td></td>
</tr>
<tr>
<td style="text-align: right">__html</td>
<td></td>
</tr>
<tr>
<td style="text-align: right">__request</td>
<td></td>
</tr>
<tr>
<td style="text-align: right">__each</td>
<td>__next, __limit, __filter</td>
</tr>
<tr>
<td style="text-align: right">__if</td>
<td>__then, __else</td>
</tr>
<tr>
<td style="text-align: right">__num</td>
<td>__next</td>
</tr>
<tr>
<td style="text-align: right">__json</td>
<td>__next</td>
</tr>
<tr>
<td style="text-align: right">__run</td>
<td></td>
</tr>
</tbody></table>
<h2 id='__if-helper'>__if helper</h2><pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"__type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"custom"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"__if"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{completed}}"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"__then"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Finished Work - {{title}}!"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"__else"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unfinished Work - {{title}}!"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Samething</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">above</span><span class="w"> </span><span class="err">but</span><span class="w"> </span><span class="err">different</span><span class="w"> </span><span class="err">approach</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"__type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"custom"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"__if"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{completed}}"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"__then"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Finished Work - {{title}}!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"__else"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unfinished Work - {{title}}!"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Javascript</span><span class="w"> </span><span class="err">example</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"__if"</span><span class="p">:</span><span class="s2">"'{{title}}'.indexOf('dahi.ai') &gt; -1"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">title</span><span class="w"> </span><span class="err">string</span><span class="w"> </span><span class="err">contains</span><span class="w"> </span><span class="err">dahi.ai</span><span class="w"> </span><span class="err">returns</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="s2">"__then"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"__else"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>__if helper uses two more paramaters. They are __then and __else. __if helper takes a string value that filled with javascript condition code like <code>true</code>, <code>&#39;{{finished}}&#39;===&#39;yes&#39;</code>, <code>{{id}} &gt; 1</code>, <code>&#39;{{name}}&#39;.length &gt; 20</code> , etc. As you can see you can use our Paramater System inside this string. If this value is true it&#39;ll use __then&#39;s value as generator, if not true it&#39;ll use __else&#39;s value as generator. If it looks for __then&#39;s or __else&#39;s value and can&#39;t find one it&#39;ll generate null. __then and __else value can be anything that is valid as </p>

<p>For example; Let&#39;s create a template that uses <code>https://jsonplaceholder.typicode.com/todos</code> api. We want to print messages according to the todo&#39;s <code>completed</code> status. If it&#39;s completed we want to add <code>Finished</code> tag to start of items text data. In example we created there are two schemas. First one returns only the ones that has <code>completed:true</code>. Second one prints every one but adds <code>Finished Work</code> or <code>Not Finished Work</code> to start of the text according to the <code>completed</code> value.</p>
<h2 id='__each-helper'>__each helper</h2><pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">__each</span><span class="w">
</span><span class="err">//</span><span class="w"> </span><span class="err">Mock</span><span class="w"> </span><span class="err">data</span><span class="w"> </span><span class="err">used</span><span class="p">:</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"title"</span><span class="p">:</span><span class="s2">"dahi.ai template"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"list"</span><span class="p">:[{</span><span class="s2">"x"</span><span class="p">:</span><span class="mi">1</span><span class="p">},{</span><span class="s2">"x"</span><span class="p">:</span><span class="mi">2</span><span class="p">},{</span><span class="s2">"x"</span><span class="p">:</span><span class="mi">3</span><span class="p">},{</span><span class="s2">"x"</span><span class="p">:</span><span class="mi">4</span><span class="p">},{</span><span class="s2">"x"</span><span class="p">:</span><span class="mi">5</span><span class="p">},{</span><span class="s2">"x"</span><span class="p">:</span><span class="mi">6</span><span class="p">},{</span><span class="s2">"x"</span><span class="p">:</span><span class="mi">7</span><span class="p">},{</span><span class="s2">"x"</span><span class="p">:</span><span class="mi">8</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Schema</span><span class="w"> </span><span class="err">Used</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"__each"</span><span class="p">:</span><span class="w"> </span><span class="s2">"list"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"__filter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{x}} % 2"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"__limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"__next"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"__num"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{x}}"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Output</span><span class="w"> 
</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This is a foreach operation. It&#39;s value should point to a json array. If array is root of the json response <code>__each</code>&#39;s value should be <code>&quot;&quot;</code>.</p>

<p>For example let assume our request from external service is <code>{test:[{key:1},{key:2}]}</code> and our schema is <code>{__each:&quot;test&quot;,number:&quot;{{key}}&quot;}</code> would generate <code>[{number:&quot;1&quot;},{number:&quot;2&quot;}]</code>.</p>
<h3 id='__limit-helper-for-__each'>__limit helper for __each</h3>
<p>This is a helper for __each helper to put a limit to how much item would you like to return maximum. Value must be a integer.</p>
<h3 id='__filter-helper-for-__each'>__filter helper for __each</h3>
<p>This is a helper for __each helper to filter arrays. It works same as __if helper but would be applied to each element before processing __each helper.</p>
<h3 id='__next-helper-for-__each'>__next helper for __each</h3>
<p>This is a helper to wrap what should be used for __each iteration elements.</p>
<h2 id='__type-helper'>__type helper</h2><pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">horizontal</span><span class="w"> </span><span class="err">type</span><span class="w"> </span><span class="err">Schema</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"__type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"horizontal"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"__limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{title}}"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subtitle {{title}}"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"__each"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">horizontal</span><span class="w"> </span><span class="err">type</span><span class="w"> </span><span class="err">Output</span><span class="w"> </span><span class="err">From</span><span class="w"> </span><span class="err">Schema</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"multi_message"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"horizontalscrollarray"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subtitle delectus aut autem"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delectus aut autem"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"buttons"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subtitle quis ut nam facilis et officia qui"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quis ut nam facilis et officia qui"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre>
<p>This a wrapper helper. Value generated from this object would be wrapped inside __type&#39;s wrapper. There are currently 2 wrappers <code>custom</code> and <code>horizontal</code>.</p>

<p><code>custom</code> wrapper would wrap output object inside a dahi.ai chat-bot send message operation format. <code>{multi_message:true,messages:[&lt;here our object would be put&gt;]}</code>. If the object that will be wrapped is array it would append to messages array. The object inside messages array must be a dahi.ai message formatted object like <code>{type:&quot;text&quot;,text:&quot;Hello, World!&quot;}</code>.</p>

<p><code>horizontal</code> wrapper would wrap output object inside a dahi.ai chat-bot horizontal message type. Look at example for more information.</p>
<h2 id='__request-helper'>__request helper</h2><pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Get</span><span class="w"> </span><span class="err">Example</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"__request"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"uri"</span><span class="p">:</span><span class="s2">"https://jsonplaceholder.typicode.com/todos"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"then"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"__each"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"__limit"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="s2">"text"</span><span class="p">:</span><span class="s2">"{{title}}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Output</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">example</span><span class="w"> </span><span class="err">above</span><span class="w">
</span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delectus aut autem"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quis ut nam facilis et officia qui"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fugiat veniam minus"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Post</span><span class="w"> </span><span class="err">Example</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"__request"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"uri"</span><span class="p">:</span><span class="s2">"https://jsonplaceholder.typicode.com/todos"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"post"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"body"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="s2">"product title {{name}}"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"then"</span><span class="p">:{</span><span class="w">
      </span><span class="err">//if</span><span class="w"> </span><span class="err">you</span><span class="w"> </span><span class="err">want</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">do</span><span class="w"> </span><span class="err">something</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">response</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>This is a tool to call external services. You can find an example of it at right section.</p>

<p>Some more info about it;</p>

<table><thead>
<tr>
<th style="text-align: right">Key</th>
<th>Description</th>
<th>Default</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right">uri</td>
<td>If your template needs to call a external <code>REST</code> service to extract data from you need to define it here.</td>
<td>No Default</td>
<td>String</td>
<td>Yes</td>
</tr>
<tr>
<td style="text-align: right">method</td>
<td>Which method used to call your uri call. <code>GET</code> or <code>POST</code></td>
<td>GET</td>
<td>String</td>
<td>No</td>
</tr>
<tr>
<td style="text-align: right">body</td>
<td>Body data if we want to post something.</td>
<td>{}</td>
<td>Object</td>
<td>No</td>
</tr>
<tr>
<td style="text-align: right">then</td>
<td>Uses the response from request to continue with schema.</td>
<td>No Default</td>
<td>Schema</td>
<td>No</td>
</tr>
<tr>
<td style="text-align: right">headers</td>
<td>Headers used with request.</td>
<td>{}</td>
<td>Object</td>
<td>No</td>
</tr>
</tbody></table>
<h2 id='__run-helper'>__run helper</h2><pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">Schema</span><span class="w"> </span><span class="err">which</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">schemas</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">template</span><span class="w"> </span><span class="err">which</span><span class="w"> </span><span class="err">it's</span><span class="w"> </span><span class="err">id</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="s2">"5a09415f91be0e2aef74b452"</span><span class="w">
</span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"__run"</span><span class="p">:</span><span class="s2">"5a09415f91be0e2aef74b452.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"__next"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"text"</span><span class="p">:</span><span class="s2">"From 0. Schema, {{text}}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"__run"</span><span class="p">:</span><span class="s2">"5a09415f91be0e2aef74b452.2"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"text"</span><span class="p">:</span><span class="s2">"From 2. Schema"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"__run"</span><span class="p">:</span><span class="s2">"5a09415f91be0e2aef74b452"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Call</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">https</span><span class="p">:</span><span class="err">//template.maytap.me/service/</span><span class="mi">5</span><span class="err">a</span><span class="mi">09415</span><span class="err">f</span><span class="mi">91</span><span class="err">be</span><span class="mi">0</span><span class="err">e</span><span class="mi">2</span><span class="err">aef</span><span class="mi">74</span><span class="err">b</span><span class="mi">452</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"text"</span><span class="p">:</span><span class="s2">"From 0. Schema, From 2. Schema"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Call</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">https</span><span class="p">:</span><span class="err">//template.maytap.me/service/</span><span class="mi">5</span><span class="err">a</span><span class="mi">09415</span><span class="err">f</span><span class="mi">91</span><span class="err">be</span><span class="mi">0</span><span class="err">e</span><span class="mi">2</span><span class="err">aef</span><span class="mi">74</span><span class="err">b</span><span class="mi">452</span><span class="err">?s=</span><span class="mi">3</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"text"</span><span class="p">:</span><span class="s2">"From 0. Schema, From 2. Schema"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>This is a helper to run another schema with current objects. This is a jump helper to access your other helpers.</p>

<p>In example we created a template with 4 schema and called first and fourth schema. When we call first schema it calls <code>&quot;5a09415f91be0e2aef74b452.1&quot;</code> schema which is [1] indexed schema of <code>&quot;5a09415f91be0e2aef74b452&quot;</code> template and continues to __next with the data retrieved from that schema and generates output <code>&quot;From 0. Schema, From 2. Schema&quot;</code>.</p>
<h3 id='__next-helper-for-__run'>__next helper for __run</h3>
<p>When __run is used alone it would return the data from the template called but if you want to use that data use create something else you can add __next to same level as __run and continue your schema from there.</p>
<h2 id='__num-helper'>__num helper</h2><pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Schema</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"parsed_number"</span><span class="p">:{</span><span class="w"> </span><span class="s2">"__num"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"0.2"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Output</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"parsed_number"</span><span class="p">:</span><span class="mf">0.2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This is a helper to parse numbers from string. In example we put static <code>&quot;0.2&quot;</code> string but you can put the number with <code>&quot;{{number}}&quot;</code>.</p>
<h2 id='__json-helper'>__json helper</h2><pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Schema</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">__json</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"parsed_json"</span><span class="p">:{</span><span class="w"> </span><span class="s2">"__json"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">test</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">test text</span><span class="se">\"</span><span class="s2">}"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Output</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">__json</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"parsed_number"</span><span class="p">:{</span><span class="w"> </span><span class="s2">"test"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test text"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This is a helper to parse json from string.</p>
<h3 id='__next-helper-for-__json'>__next helper for __json</h3><pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Schema</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">__json</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">__next</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"parsed_json"</span><span class="p">:{</span><span class="w">
     </span><span class="s2">"__json"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">test</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">test text</span><span class="se">\"</span><span class="s2">}"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"__next"</span><span class="p">:{</span><span class="w">
       </span><span class="s2">"next_next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"last {{test}}"</span><span class="w">
     </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Output</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">__json</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">__next</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"parsed_number"</span><span class="p">:{</span><span class="w"> </span><span class="s2">"next_next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"last test text"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This is a helper to continue schema with data parsed from json string. In example we put static <code>&quot;{\&quot;test\&quot;:\&quot;test text\&quot;}&quot;</code> string but you can define it with <code>&quot;{{json}}&quot;</code> with external stringfied text.</p>
<h2 id='__html-helper'>__html helper</h2><pre class="highlight json tab-json"><code><span class="w">
</span><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">Template</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"uri"</span><span class="p">:</span><span class="s2">"https://www.lipsum.com/feed/html"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"schemas"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"__html"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="s2">"{{#Inner &gt; h1}}"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paragraphs"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"__each"</span><span class="p">:</span><span class="s2">"#lipsum p"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"text"</span><span class="p">:</span><span class="s2">"{{$$(item).text()}}"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"sys"</span><span class="p">:</span><span class="s2">"from {{title}}"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"texts"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"__each"</span><span class="p">:</span><span class="s2">"paragraphs"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"__next"</span><span class="p">:</span><span class="s2">"{{text}}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Outpu</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">example</span><span class="w"> </span><span class="err">above</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"texts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Lorem ipsum dolor sit amet, consectetur adipiscing elit. In in tincidunt purus. Nunc et justo augue. Cras ut fringilla erat. Fusce quis aliquam elit, vitae cursus dui. Nam interdum neque a auctor congue. Fusce facilisis arcu ut odio accumsan, nec vehicula libero auctor. Maecenas lorem neque, interdum ac magna ut, bibendum egestas ipsum."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Sed mauris dolor, pharetra nec urna eu, eleifend fringilla felis. Aenean laoreet aliquet libero eu efficitur. Donec a augue lectus. Etiam in lacinia nulla, vitae pellentesque nunc. Phasellus hendrerit mattis posuere. Nulla condimentum, sapien a scelerisque bibendum, neque tellus laoreet nisi, at bibendum dolor mi eget dui. Sed id lorem finibus, pellentesque nulla eu, scelerisque dolor. Nulla sed lectus dolor. Nulla accumsan felis pharetra nibh porta, non egestas dui placerat. Donec fringilla leo ac sem tempus, sed porttitor diam malesuada. Suspendisse quis arcu risus. Maecenas tempor ultricies tellus, nec pharetra elit vulputate in. Nam leo ante, mollis sit amet mollis et, vehicula ac velit."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Cras tincidunt efficitur lacus non varius. Curabitur scelerisque nulla non mauris vehicula tempus. Aenean tellus sapien, mollis eget odio sed, posuere efficitur diam. In suscipit blandit eleifend. Suspendisse fringilla urna ac quam feugiat, efficitur feugiat enim viverra. Quisque congue purus eget finibus volutpat. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Vivamus varius pharetra convallis. Integer ullamcorper quam libero, eget elementum eros dapibus a."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Ut elit ipsum, faucibus vitae elit quis, finibus viverra velit. Pellentesque magna sem, fringilla quis finibus id, egestas ut nunc. Nullam sit amet neque finibus, lacinia mi id, interdum magna. Donec eget ligula sem. Mauris sodales est in efficitur maximus. Duis quis convallis risus, at gravida nulla. Duis tempor commodo neque, ac mattis odio malesuada vel. Phasellus tempus dui eu congue dictum. Vivamus suscipit efficitur sapien, nec faucibus quam. Etiam porttitor ante in bibendum iaculis. Curabitur diam lectus, dapibus in arcu at, interdum accumsan leo. Quisque vulputate libero in neque lacinia, in elementum neque pulvinar."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Sed vel blandit ligula, a mattis libero. Suspendisse in velit felis. Morbi eleifend turpis ut lacus facilisis, vitae varius enim hendrerit. Proin a dictum odio. Ut ut est vehicula, feugiat massa eget, rhoncus nibh. Phasellus ac magna porta, venenatis sapien vitae, elementum ipsum. Donec in libero non turpis pretium rutrum nec sit amet erat. Praesent dapibus sed quam sed tincidunt. Mauris luctus ultrices risus, ultricies fermentum libero convallis ut."</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"sys"</span><span class="p">:</span><span class="w"> </span><span class="s2">"from Lorem Ipsum"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>This is a parser with different rules. Basic <code>&quot;{{key}}&quot;</code> rule still works. But instead of key&#39;s we need to give it some css selector or javascript code to get what we want. In first example we&#39;re using <strong>each to get an array of items then uses them to define values for items. `</strong>html<code>helpers would work before other helpers and replace current cursor with crawled data. The helpers work after</code>__html` helper would use the cursor from it.</p>

<p>In example there is 2 different usage way to get data first is <code>{{#Inner &gt; h1}}</code> and second is <code>{{$$(item).text()}}</code>; Actualy first one is almost same as second but it&#39;s short way to write and don&#39;t need much knowledge about jquery or cheerio. <code>{{#Inner &gt; h1}}</code> would be equal to <code>{{$$(&#39;#Inner &gt; h1&#39;).text()}}</code> if it&#39;s not inside in an __each helper. If it&#39;s inside of a __each helper it would mean <code>{{$$(item).find(&#39;#Inner &gt; h1&#39;).text()}}</code>.</p>
<h3 id='__each-helper-for-__html'>__each helper for __html</h3>
<p>You can use it like this <code>{&quot;__html&quot;:{&quot;__each&quot;:&quot;#item-list .product&quot;,&quot;title&quot;:&quot;{{h1}}&quot;}}</code>. In this example it would get the dom elements with <code>product</code> class inside a dom that it&#39;s id is <code>item-list</code>. Then for each product it would try to find an <code>h1</code> tagged dom and put&#39;s it&#39;s text to title keyword. This would create an array with products titles like <code>[{&quot;title&quot;:&quot;item 1&quot;},{&quot;title&quot;:&quot;item 2&quot;},{&quot;title&quot;:&quot;item 3&quot;}]</code> and put it as our cursor. Next we can do something with this like: <code>{&quot;__html&quot;:{&quot;__each&quot;:&quot;#item-list .product&quot;,&quot;title&quot;:&quot;{{h1}}&quot;},&quot;__each&quot;:&quot;&quot;,&quot;last&quot;:&quot;{{title}}&quot;}</code> and it would generate <code>[{&quot;last&quot;:&quot;item 1&quot;},{&quot;last&quot;:&quot;item 2&quot;},{&quot;last&quot;:&quot;item 3&quot;}]</code>.</p>

<p>Note: Inside __each you don&#39;t need to use <code>{{}}</code> like normal __each.</p>
<h3 id='how-to-use-advanced-features'>How to use advanced features</h3>
<p>You can use any features from popular nodejs library for html dom parsing <a href="https://github.com/cheeriojs/cheerio">cheerio (Go to Cheerio docs)</a>. To use it you need to put a <code>$</code> sembol to start of <code>{{}}</code> paramater system like <code>{{$}}</code> then you can write cheerio code inside of it. You can access to current cursor object with <code>item</code> variable like <code>{{$$(item).find(&#39;img&#39;).attr(&#39;src&#39;)}}</code> this would search for img tagged element and get it&#39;s src attribute. For more information you can check cheerio docs.</p>
<h2 id='usage'>Usage</h2><pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">Template</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"uri"</span><span class="p">:</span><span class="s2">"https://jsonplaceholder.typicode.com/posts/{{id}}"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"GET"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Call</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">https</span><span class="p">:</span><span class="err">//template.maytap.me/service/</span><span class="mi">5</span><span class="err">a</span><span class="mi">09415</span><span class="err">f</span><span class="mi">91</span><span class="err">be</span><span class="mi">0</span><span class="err">e</span><span class="mi">2</span><span class="err">aef</span><span class="mi">74</span><span class="err">b</span><span class="mi">4</span><span class="err">d</span><span class="mi">3</span><span class="err">?data.id=</span><span class="mi">1</span><span class="err">&amp;raw=</span><span class="kc">true</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sunt aut facere repellat provident occaecati excepturi optio reprehenderit"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quia et suscipit</span><span class="se">\n</span><span class="s2">suscipit recusandae consequuntur expedita et cum</span><span class="se">\n</span><span class="s2">reprehenderit molestiae ut ut quas totam</span><span class="se">\n</span><span class="s2">nostrum rerum est autem sunt rem eveniet architecto"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Call</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">https</span><span class="p">:</span><span class="err">//template.maytap.me/service/</span><span class="mi">5</span><span class="err">a</span><span class="mi">09415</span><span class="err">f</span><span class="mi">91</span><span class="err">be</span><span class="mi">0</span><span class="err">e</span><span class="mi">2</span><span class="err">aef</span><span class="mi">74</span><span class="err">b</span><span class="mi">4</span><span class="err">d</span><span class="mi">3</span><span class="err">?data.id=</span><span class="mi">2</span><span class="err">&amp;raw=</span><span class="kc">true</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qui est esse"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"est rerum tempore vitae</span><span class="se">\n</span><span class="s2">sequi sint nihil reprehenderit dolor beatae ea dolores neque</span><span class="se">\n</span><span class="s2">fugiat blanditiis voluptate porro vel nihil molestiae ut reiciendis</span><span class="se">\n</span><span class="s2">qui aperiam non debitis possimus qui neque nisi nulla"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Template</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"uri"</span><span class="p">:</span><span class="s2">"https://jsonplaceholder.typicode.com/posts/{{id}}"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"GET"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Post</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">url</span><span class="w"> </span><span class="err">https</span><span class="p">:</span><span class="err">//template.maytap.me/service/</span><span class="mi">5</span><span class="err">a</span><span class="mi">09415</span><span class="err">f</span><span class="mi">91</span><span class="err">be</span><span class="mi">0</span><span class="err">e</span><span class="mi">2</span><span class="err">aef</span><span class="mi">74</span><span class="err">b</span><span class="mi">4</span><span class="err">d</span><span class="mi">3</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">1</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"raw"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">Response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sunt aut facere repellat provident occaecati excepturi optio reprehenderit"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quia et suscipit</span><span class="se">\n</span><span class="s2">suscipit recusandae consequuntur expedita et cum</span><span class="se">\n</span><span class="s2">reprehenderit molestiae ut ut quas totam</span><span class="se">\n</span><span class="s2">nostrum rerum est autem sunt rem eveniet architecto"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>What template api looks when a request made is id of your template, index of which schema you want to use <code>s:0 default</code>. Data to use in uri creation or to post to external server. Should response generated with dahi schema <code>dahi:false default</code>. </p>

<p>If we combine these we&#39;ll get a object like this: <code>{s:0,data:{},id:&quot;5a0407686090c8750ae9baa9&quot;,dahi:false}</code>. For more example look at right section.</p>
<h3 id='how-to-get-raw-response-to-debug'>How to get raw response to debug</h3>
<p>If you add ?raw=true to your url or add raw:true to your request json if you are using post method. With this you can debug what our system recieves before generation a output data from external api that defined from uri. example url: <code>https://template.maytap.me/service/5a0407686090c8750ae9baa9?raw=true</code>.</p>
<h3 id='with-get-call'> With GET Call</h3>
<p>In this method <code>(When template.method=&quot;GET&quot;)</code> data would be used to generate uri. Let&#39;s say our uri in template is <code>https://jsonplaceholder.typicode.com/posts/{{id}}</code>. It needs id to generate this uri so need to pass id value inside data object so our call uri needs to be <code>https://template.maytap.me/service/&lt;id&gt;?data.id=1</code>. This uri would generate <code>{s:0,data:{id:1},dahi:false}</code> object and send it to template.</p>
<h3 id='with-post-call'> With POST Call</h3>
<p>It&#39;s same with get method but in this we&#39;re sending all the information in request body.</p>
<h3 id='template-39-s-post-method'>Template&#39;s POST Method</h3>
<p>In previous sections we have examples that uses method <code>GET</code>. For template that uses <code>POST</code> there is just a small difference. data from <code>{s:0,data:{},dahi:false}</code> would be used as request body to call your uri that defined in template.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
